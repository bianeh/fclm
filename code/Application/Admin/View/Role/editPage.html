<include file="./Application/Common/View/pageheader.html" />

<div class="row">
<div class="col-sm-12">
    <div class="ibox float-e-margins">
        <div class="ibox-title">
            <h5>修改角色</h5>
            <ol class="breadcrumb pull-right">
                <li>
                    <a href="{:U('Admin/Role/index')}"><strong>返回上一页</strong></a>
                </li>
            </ol>
        </div>
        <div class="ibox-content">		
			<form class="form-horizontal col-sm-12" action="{:U('Admin/Role/edit')}" method="POST">
				<div class="col-sm-8">
					<input type="hidden" name="id" value="{$role.id}">
					<div class="form-group">
						<label class="col-sm-3 control-label">角色名称</label>
						<div class="col-sm-7">
						  <input type="text" name="name" value="{$role.name}" class="form-control" placeholder="角色名称">
						</div>
					</div>
					<div class="form-group">
	                    <label class="col-sm-3 control-label">角色隶属于</label>
	                    <div class="col-sm-7">	           
	                        <select name="pid" onchange="javascript:switchLevel();" id="parent"  class='form-control'>
	                        	<foreach name="roleList" item="vo">
									<if condition="$role.id neq $vo.id ">
										<if condition="$role.pid eq $vo.id ">
											<option value="{$vo.id}" level="{$vo.level}" selected="selected">{$vo.name}</option>
										<else />
											<option value="{$vo.id}" level="{$vo.level}">{$vo.name}</option>
										</if>
									<else />	
									</if>	
								</foreach>
	                        </select>
	                    </div>
						<input type="hidden" name="level" value="{$role.level}" id="level">
	                </div>
	                <div class="form-group">
	                    <label class="col-sm-3 control-label">角色描述</label>
	                    <div class="col-sm-7">
	                        <textarea name="remark" rows="5" class='form-control' placeholder="角色基本描述内容">{$role.remark}</textarea>
	                    </div>
	                </div>	
					<div class="form-group">
	                    <label class="col-sm-3 control-label">启用</label>
	                    <div class="col-sm-7">
	                        <div class="checkbox">
							  <label>
								<if condition="$role.status eq 1">
									<input type="checkbox" name="status" class="checkbox" value="1" checked>
								<else />
									<input type="checkbox" name="status" class="checkbox" value="1">
								</if>					
							  </label>
							</div>
	                    </div>
	                </div>
				</div>
				<div class="clearfix"></div>
				<div class="from-group">
					<button class='btn btn-success'>保存</button>
				</div>
            </form>
            <div class="clearfix"></div>
		</div>
		

    </div>
</div>

<include file="./Application/Common/View/pagefooter.html" />

<script>
    function switchLevel(){
		var p_level = $("#parent option:selected").attr("level");
		var level = parseInt(p_level)+1;
		$("#level").val(level);
	}
</script>